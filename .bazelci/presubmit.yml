---
platforms:
  ubuntu1404:
    build_targets:
    - "..."
    - "@examples//..."
    test_targets:
    - "..."
    - "@examples//..."
  ubuntu1604:
    build_targets:
    - "..."
    - "@examples//..."
    test_targets:
    - "..."
    - "@examples//..."
  macos:
    targets: &targets
    - "--" # Hack for https://github.com/bazelbuild/continuous-integration/pull/245
    - "..."
    # Skip tests for dylib support on osx, since we don't support it yet.
    - "@examples//..."
    - "-@examples//ffi/rust_calling_c:matrix_dylib_test"
    - "-@examples//ffi/rust_calling_c:matrix_dynamically_linked"
    build_targets: *targets
    test_targets: *targets
  rbe_ubuntu1604:
    test_targets:
    - "--"
    - "//test/..."
    - "@examples//..."
    - "-//test/conflicting_deps:conflicting_deps_test"
    - "-@examples//hello_runfiles:hello_runfiles_test"
    - "-@examples//ffi/c_calling_rust:main"
    - "-@examples//ffi/rust_calling_c:matrix_dylib_test"
    - "-@examples//ffi/rust_calling_c:matrix_test"
    - "-@examples//fibonacci:fibonacci_doc_test"
    - "-@examples//fibonacci:fibonacci_test"
    - "-@examples//hello_lib:greeting_test"
    - "-@examples//hello_lib:hello_lib_doc_test"
    - "-@examples//hello_lib:hello_lib_test"
    - "-@examples//hello_world:hello_world_doc_test"
    - "-@examples//hello_out_dir:hello_out_dir_test"
